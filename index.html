<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Draft 2025 - MLB HR & RBI Leaderboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    thead {
      background: #e0e0e0;
      color: #333;
    }

    th, td {
      padding: 0.75rem;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }

    tbody tr:nth-child(odd) {
      background: #f9f9f9;
    }

    tbody tr:nth-child(even) {
      background: #efefef;
    }

    tbody tr:hover {
      background: #dbeafe;
      transition: background 0.2s ease;
    }

    a.player-link { text-decoration: none; color: inherit; font-weight: bold; }
    a.player-link:hover { text-decoration: underline; color: #0366d6; }

    #countdown-block {
      background: linear-gradient(135deg, #0366d6, #4cafef);
      border-radius: 12px;
      padding: 1rem 2rem;
      display: inline-block;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      margin-top: 0.5rem;
      color: white;
    }

    #countdown {
      font-size: 1.75rem;
      font-weight: bold;
      color: #fff;
      margin: 0;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>
  <nav class="container-fluid">
    <ul><li><strong>âš¾ Draft 2025</strong></li></ul>
  </nav>

  <section class="container" style="text-align: center; margin-top: 1rem;">
    <h3>Draft Day</h3>
    <div id="countdown-block">
      <h2 id="countdown">Loading countdown...</h2>
    </div>
  </section>

  <main class="container">
    <table>
      <thead>
        <tr><th>Rank</th><th>Player</th><th>Associated</th><th>HR</th><th>RBI</th></tr>
      </thead>
      <tbody id="leaderboard">
        <tr><td colspan="5">Loading stats...</td></tr>
      </tbody>
    </table>
  </main>

  <footer class="container">
    <small><a href="https://statsapi.mlb.com/" target="_blank">MLB Stats API</a></small>
  </footer>

  <script>
    const players = [
      { name: "Kyle Schwarber", assoc: "Jeff", espn: "https://www.espn.com/mlb/player/gamelog/_/id/33712/kyle-schwarber", url: "https://statsapi.mlb.com/api/v1/people/656941/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Pete Alonso", assoc: "Noah", espn: "https://www.espn.com/mlb/player/gamelog/_/id/37498/pete-alonso", url: "https://statsapi.mlb.com/api/v1/people/624413/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Juan Soto", assoc: "LeFev", espn: "https://www.espn.com/mlb/player/gamelog/_/id/36969/juan-soto", url: "https://statsapi.mlb.com/api/v1/people/665742/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Shohei Ohtani", assoc: "Grant", espn: "https://www.espn.com/mlb/player/gamelog/_/id/39832/shohei-ohtani", url: "https://statsapi.mlb.com/api/v1/people/660271/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Cal Raleigh", assoc: "Nolan", espn: "https://www.espn.com/mlb/player/gamelog/_/id/41292/cal-raleigh", url: "https://statsapi.mlb.com/api/v1/people/663728/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Taylor Ward", assoc: "Diego", espn: "https://www.espn.com/mlb/player/gamelog/_/id/34923/taylor-ward", url: "https://statsapi.mlb.com/api/v1/people/621493/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Cody Bellinger", assoc: "Cam", espn: "https://www.espn.com/mlb/player/gamelog/_/id/33912/cody-bellinger", url: "https://statsapi.mlb.com/api/v1/people/641355/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Riley Greene", assoc: "Troy", espn: "https://www.espn.com/mlb/player/gamelog/_/id/42179/riley-greene", url: "https://statsapi.mlb.com/api/v1/people/682985/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Spencer Torkelson", assoc: "Ryan H", espn: "https://www.espn.com/mlb/player/gamelog/_/id/4424286/spencer-torkelson", url: "https://statsapi.mlb.com/api/v1/people/679529/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Brent Rooker", assoc: "Will", espn: "https://www.espn.com/mlb/player/gamelog/_/id/40926/brent-rooker", url: "https://statsapi.mlb.com/api/v1/people/667670/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Seiya Suzuki", assoc: "Ted", espn: "https://www.espn.com/mlb/player/gamelog/_/id/4142424/seiya-suzuki", url: "https://statsapi.mlb.com/api/v1/people/673548/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" },
      { name: "Manny Machado", assoc: "Buck", espn: "https://www.espn.com/mlb/player/gamelog/_/id/31097/manny-machado", url: "https://statsapi.mlb.com/api/v1/people/592518/stats?stats=byDateRange&group=hitting&type=statSplits&startDate=2025-08-01&endDate=2025-08-30" }
    ];

    async function loadStats() {
      const results = [];
      for (const p of players) {
        try {
          const res = await fetch(p.url);
          const data = await res.json();
          const splits = data.stats[0]?.splits[0]?.stat || {};
          const hr = parseInt(splits.homeRuns || 0);
          const rbi = parseInt(splits.rbi || 0);
          results.push({ name: p.name, assoc: p.assoc, espn: p.espn, hr, rbi });
        } catch (err) {
          results.push({ name: p.name, assoc: p.assoc, espn: p.espn, hr: 0, rbi: 0 });
        }
      }

      results.sort((a, b) => b.hr - a.hr || b.rbi - a.rbi);

      const tbody = document.getElementById("leaderboard");
      tbody.innerHTML = "";
      results.forEach((p, idx) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${idx+1}</td><td><a class=\"player-link\" href=\"${p.espn}\" target=\"_blank\">${p.name}</a></td><td>${p.assoc}</td><td>${p.hr}</td><td>${p.rbi}</td>`;
        tbody.appendChild(tr);
      });
    }

    function startCountdown() {
      const targetDate = new Date("August 30, 2025 10:00:00 PST").getTime();

      setInterval(() => {
        const now = new Date().getTime();
        const distance = targetDate - now;

        if (distance < 0) {
          document.getElementById("countdown").innerText = "Draft has started!";
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("countdown").innerText =
          `${days}d : ${hours}h : ${minutes}m : ${seconds}s`;
      }, 1000);
    }

    loadStats();
    startCountdown();
  </script>
</body>
</html>